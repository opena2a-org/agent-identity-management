# ====================================================================================
# AIM (Agent Identity Management) - Environment Configuration Template
# ====================================================================================
# Copy this file to .env and fill in your actual values
#
# Quick Start:
#   cp .env.example .env
#   # Edit .env with your actual credentials
#   docker compose up -d
#
# ⚠️  SECURITY WARNING:
#    - NEVER commit .env file to version control
#    - NEVER share JWT_SECRET or OAuth secrets publicly
#    - Always use strong, unique passwords for production
# ====================================================================================

# ====================================================================================
# APPLICATION ENVIRONMENT
# ====================================================================================
# Environment: development | staging | production
ENVIRONMENT=development
NODE_ENV=development
# Log level: debug | info | warn | error
LOG_LEVEL=debug

# ====================================================================================
# SERVER CONFIGURATION
# ====================================================================================
SERVER_HOST=0.0.0.0
APP_PORT=8080
FRONTEND_URL=http://localhost:3000

# CORS Configuration (comma-separated list of allowed origins)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ====================================================================================
# DATABASE CONFIGURATION
# ====================================================================================
# PostgreSQL - Primary Database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/identity?sslmode=disable

# Backend uses POSTGRES_* variables:
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=identity
POSTGRES_SSL_MODE=disable
POSTGRES_MAX_CONNECTIONS=25
POSTGRES_CONN_MAX_LIFETIME=5m

# ====================================================================================
# CACHE & SESSION STORAGE
# ====================================================================================
# Redis (optional - AIM runs without Redis if not available)
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ====================================================================================
# AUTHENTICATION & SECURITY
# ====================================================================================
# JWT Configuration
# IMPORTANT: Generate a strong secret using: openssl rand -hex 32
JWT_SECRET=your_jwt_secret_here_replace_with_random_64_char_hex
JWT_ACCESS_TTL=24h
JWT_REFRESH_TTL=168h

# KeyVault Master Key (for encrypting agent private keys)
# Generate using: openssl rand -base64 32
KEYVAULT_MASTER_KEY=your_keyvault_master_key_here_replace_with_base64

# API Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# Trust Score Thresholds (0-100)
TRUST_SCORE_MIN_LOW=50.0
TRUST_SCORE_MIN_MEDIUM=70.0
TRUST_SCORE_MIN_HIGH=85.0

# ====================================================================================
# OAUTH PROVIDERS (Enterprise SSO - All Optional)
# ====================================================================================
# Google OAuth (Get from https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URL=http://localhost:8080/api/v1/auth/callback/google

# ====================================================================================
# FRONTEND CONFIGURATION
# ====================================================================================
# Next.js Frontend (NEXT_PUBLIC_ prefix exposes to browser)
NEXT_PUBLIC_API_URL=http://localhost:8080
NEXT_PUBLIC_APP_NAME=Agent Identity Management
NEXT_PUBLIC_SUPPORT_EMAIL=info@opena2a.org

# ====================================================================================
# EMAIL CONFIGURATION
# ====================================================================================
# Email Provider: smtp | azure | console (console prints to logs, good for development)
EMAIL_PROVIDER=azure

# Common Email Settings
EMAIL_FROM_ADDRESS=DoNotReply@your-domain.azurecomm.net
EMAIL_FROM_NAME=Agent Identity Management
EMAIL_TEMPLATES_DIR=apps/backend/internal/infrastructure/email/templates
EMAIL_RATE_LIMIT_PER_MINUTE=60

# Azure Communication Services (if EMAIL_PROVIDER=azure)
# Get from: Azure Portal → Communication Services → Keys
AZURE_EMAIL_CONNECTION_STRING=endpoint=https://your-resource.communication.azure.com/;accesskey=your-access-key
AZURE_EMAIL_POLLING_ENABLED=false

# SMTP Configuration (if EMAIL_PROVIDER=smtp)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_TLS_ENABLED=true
SMTP_MAX_CONNECTIONS=10

# ====================================================================================
# FEATURE FLAGS
# ====================================================================================
ENABLE_AUDIT_LOGGING=true
ENABLE_WEBHOOKS=true
ENABLE_ALERTS=true
ENABLE_COMPLIANCE_REPORTS=true
